This program has the most cursed data flow I have seen in my entire life

Also todo rename a bunch of stuff with __ to make it private methods 